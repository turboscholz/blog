<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Bluetooth-Automatisierung für die Corona-App | Der Gedöns-Blog</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="de" href="../../rss.xml">
<link rel="canonical" href="https://turboscholz.github.io/blog/posts/bluetooth-automatisierung-fur-die-corona-app/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Uwe Scholz">
<link rel="prev" href="../aus-alt-mach-neu/" title="Aus alt mach neu" type="text/html">
<link rel="next" href="../das-war-mein-2020/" title="Das war mein 2020" type="text/html">
<meta property="og:site_name" content="Der Gedöns-Blog">
<meta property="og:title" content="Bluetooth-Automatisierung für die Corona-App">
<meta property="og:url" content="https://turboscholz.github.io/blog/posts/bluetooth-automatisierung-fur-die-corona-app/">
<meta property="og:description" content="Seit ein paar Monaten habe ich die Corona-App auf meinem Handy installiert. Aber
ich bin ja ein (Daten-)Sparfuchs und deaktivierte Bluetooth am Handy,
vor allem, wenn ich sowieso im Homeoffice bin. Um">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2020-11-01T21:46:12+01:00">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Springe zum Hauptinhalt</a>

<!-- Menubar -->

<nav class="navbar navbar-expand-md static-top mb-4
navbar-dark
bg-dark
"><div class="container">
<!-- This keeps the margins nice -->
        <a class="navbar-brand" href="../../">

            <span id="blog-title">Der Gedöns-Blog</span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bs-navbar">
            <ul class="navbar-nav mr-auto">
<li class="nav-item">
<a href="../../archive.html" class="nav-link">Archiv</a>
                </li>
<li class="nav-item">
<a href="../../categories/" class="nav-link">Tags</a>
                </li>
<li class="nav-item">
<a href="../../pages/Datenschutz/index.html" class="nav-link">Datenschutzerklärung</a>
                </li>
<li class="nav-item">
<a href="../../pages/impressum/index.html" class="nav-link">Impressum</a>
                </li>
<li class="nav-item">
<a href="../../rss.xml" class="nav-link">RSS-Feed</a>

                
            </li>
</ul>
<ul class="navbar-nav navbar-right">
<li class="nav-item">
    <a href="index.rst" id="sourcelink" class="nav-link">Source</a>
    </li>


                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Bluetooth-Automatisierung für die Corona-App</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    Uwe Scholz
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2020-11-01T21:46:12+01:00" itemprop="datePublished" title="2020-11-01 21:46">2020-11-01 21:46</time></a>
            </p>
            
        <p class="sourceline"><a href="index.rst" class="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>Seit ein paar Monaten habe ich die <a class="reference external" href="https://www.coronawarn.app/de/">Corona-App</a> auf meinem Handy installiert. Aber
ich bin ja ein (Daten-)Sparfuchs und deaktivierte Bluetooth am Handy,
vor allem, wenn ich sowieso im Homeoffice bin. Umso mehr habe ich mich
immer geärgert, wenn ich von einem Besuch auf dem Wochenmarkt nach Hause
kam und festgestellt habe, dass die Corona-App wegen deaktiviertem
Bluetooth nicht arbeiten konnte. Eine Lösung für dieses Problem musste
her.</p>
<!-- TEASER_END -->
<p>Für Android-Handys gibt es für automatisierbare Aufgaben die App
<a class="reference external" href="https://llamalab.com/automate/">Automate</a> von der Firma LlamaLab. In
dieser App kann man über graphische Flussdiagramme ("Flows") das
Verhalten des Handys steuern, wenn bestimmte Ereignisse eintreten. Ein
Flow besteht dabei aus Blöcken, in denen zum Beispiel Daten ausgelesen,
Entscheidungen getroffen oder Dateien auf dem Handy erstellt werden. Ein
ganz einfacher Flow ist zum Beispiel: Schieße ein Foto mit der
Frontkamera, wenn die PIN falsch eingegeben wurde. Dies ist eine
ziemlich einfache Aufgabe und erfordert nur 5 Blöcke in einem Flow.
Allerdings benötigt die App dafür auch gewisse Rechte, zum Beispiel eben
den Zugriff auf die Kamera und auf das Dateisystem zum Abspeichern der
Fotos.</p>
<p>Letztlich kann die App fast alle Sensoren des Telefons auslesen und mit
diesen bestimmte Aktionen auslösen - es existieren aktuell
(November 2020) über 330 Blöcke. Die kostenlose und trotzdem werbefreie
Variante der App hat nur eine einzige Einschränkung: Es können maximal
30 Blöcke in allen Flows zusammen existieren. Bezahlt man jedoch ein
paar Euro für die App, so gibt es keine Grenze mehr.</p>
<p>Kommen wir nun also zu dem von mir erstellten Flow, in dem das Bluetooth
meines Telefons automatisch an- oder ausgeschaltet werden soll. Diesen
Flow kann man sich übrigens über die <a class="reference external" href="https://llamalab.com/automate/community/flows/37325">Community</a> von Automate
herunterladen. Folgende Anforderungen hatte ich an den Flow:</p>
<ul class="simple">
<li><p>Wenn ich aus dem Haus gehe, soll Bluetooth aktiviert werden. Komme
ich wieder Heim, dann soll Bluetooth wieder deaktiviert werden. Der
Zustand "Ich bin zu Haus" soll über die Verfügbarkeit von unserem WLAN
definiert werden: Ist WLAN am Handy aktiviert und ist unser Haus-WLAN
verfügbar, so bin ich höchstwahrscheinlich zu Hause und benötige
Bluetooth nicht.</p></li>
<li><p>Zwischen 23 und 7 Uhr soll Bluetooth deaktiviert werden denn da bin
ich sehr wahrscheinlich im Bett. Das heißt, nur zwischen 7 und 23 Uhr
soll Bluetooth aktiviert werden, aber auch nur, wenn ich nicht zu
Hause bin (siehe oben).</p></li>
<li><p>Bin ich zu Hause und mein Handy ist gerade mit einem Bluetooth-Gerät
verbunden (z.B. mit Kopfhörern), so soll Bluetooth nicht deaktiviert
werden.</p></li>
</ul>
<p>Ohne viel Umschweife folgt hier die graphische Darstellung des Flows,
den ich mit Automate erstellt habe:</p>
<img alt="Der Flow für Bluetooth für die Corona-App in Automate" src="../../images/2020-11-01-Corona-Automate.png"><p>Ganz oben geht es los mit "Pick Wifi-Network": Dieser Block zeigt beim
Starten des Flows einen Auswahldialog der verfügbaren WLANs an, die gerade
im Handy gefunden werden. Hier muss man sein "Haus-WLAN" auswählen. Dies
ist notwendig, damit entschieden werden kann, ob man zu Hause ist oder
nicht. Die Entscheidung passiert im Block mit der Nummer "3".</p>
<p>Natürlich soll Bluetooth immer nur dann aus- oder angeschaltet werden,
wenn es vorher an oder eben aus war. Dafür sind die Abfragen in den
Blöcken mit der Nummer 27 und 28 da. Wenn zur Laufzeit entschieden wird,
dass Bluetooth wirklich aus- oder eben angeschaltet werden soll, so
passiert das in den Blöcken 19 oder 2. Danach wird jeweils noch eine
kurze Statusmeldung (eine Toastnachricht) eingeblendet. Nach fünf
Minuten Wartezeit (Block 7 ganz unten) geht es wieder von vorne bei der
Überprüfung der vohandenen WLANs los.</p>
<p>Da dieser Flow weniger als 30 Blöcke hat, kann man ihn sogar in der
kostenlosen Variante von Automate verwenden. Ich habe mir die App jedoch
gekauft, weil man noch viele andere interessante Dinge damit machen
kann.</p>
    </div>
    <aside class="postpromonav"><nav><ul class="pager hidden-print">
<li class="previous">
                <a href="../aus-alt-mach-neu/" rel="prev" title="Aus alt mach neu">Vorheriger Eintrag</a>
            </li>
            <li class="next">
                <a href="../das-war-mein-2020/" rel="next" title="Das war mein 2020">Nächster Eintrag</a>
            </li>
        </ul></nav></aside></article><!--End of body content--><footer id="footer">
            Contents © 2023         <a href="mailto:u.scholz83@gmx.de">Uwe Scholz</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
            
        </footer>
</div>
</div>


        <script src="../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    </script>
</body>
</html>
